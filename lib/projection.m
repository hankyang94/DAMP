function [varargout] = projection(subfun,varargin)
[varargout{1:nargout}] = feval(subfun,varargin{:}); 

%% reference: http://nghiaho.com/?page_id=846
%%-------------------------------------------------------------------------
function [rx,ry,rz] = get_rotation_angle(R)
%%-------------------------------------------------------------------------
rx = atan2(R(3,2), R(3,3));
ry = atan2(-R(3,1), sqrt(R(3,2)*R(3,2) + R(3,3)*R(3,3)));
rz = atan2(R(2,1), R(1,1));
rx = rx/pi*180;
ry = ry/pi*180;
rz = rz/pi*180;

%%-------------------------------------------------------------------------
function R = get_rotation_matrix(rx,ry,rz,version)
%%-------------------------------------------------------------------------
Rx = [1 0 0; 
      0 cosd(rx) -sind(rx); 
      0 sind(rx) cosd(rx)];    
Ry = [cosd(ry) 0 sind(ry); 
      0 1 0; 
      -sind(ry) 0 cosd(ry)];
Rz = [cosd(rz) -sind(rz) 0; 
      sind(rz) cosd(rz) 0; 
      0 0 1];

if version == 1
    R = Rz * Ry * Rx;
elseif version == 2
    R = Rx * Ry * Rz;
end

%%-------------------------------------------------------------------------
function t = get_translation_matrix(tx,ty,tz)
%%-------------------------------------------------------------------------
t(1) = tx; t(2) = ty; t(3) = tz;

%%-------------------------------------------------------------------------
function Rt = get_extrinsic_matrix(R,t)
%%-------------------------------------------------------------------------
Rt(:,1:3) = R;
Rt(:,4) = t;

%%-------------------------------------------------------------------------
function K = get_intrinsic_matrix(f,mx,my,u0,v0)
%%-------------------------------------------------------------------------
K(1,1) = -mx*f; K(1,2) = 0;    K(1,3) = u0;
K(2,1) = 0;    K(2,2) = my*f;  K(2,3) = v0;
K(3,1) = 0;    K(3,2) = 0;     K(3,3) = 1;

%%-------------------------------------------------------------------------
function X = world2camera(X, Rt)
%%-------------------------------------------------------------------------
X(4,:) = 1;
X = Rt * X;

%%-------------------------------------------------------------------------
function x = camera2image(X,K)
%%-------------------------------------------------------------------------
x = K * X;
x(1,:) = x(1,:) ./ x(3,:);
x(2,:) = x(2,:) ./ x(3,:);

